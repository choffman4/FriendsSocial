syntax = "proto3";

option csharp_namespace = "GrpcMongoPostingService";

package post;

// User API service definition
service MongoPostingService {
    rpc CreatePost(CreatePostRequest) returns (CreatePostResponse);
    rpc GetPostById(GetPostByIdRequest) returns (GetPostByIdResponse);
    rpc GetAllPostsByUserId(GetAllPostsByUserIdRequest) returns (stream GetAllPostsByUserIdResponse);
    rpc EditPost(EditPostRequest) returns (EditPostResponse);
    rpc DeletePost(DeletePostRequest) returns (DeletePostResponse);
    rpc LikePost(LikePostRequest) returns (LikePostResponse);
    rpc AddComment(AddCommentRequest) returns (AddCommentResponse);
    rpc DeleteComment(DeleteCommentRequest) returns (DeleteCommentResponse);
    rpc LikeComment(LikeCommentRequest) returns (LikeCommentResponse);
    rpc AddCommentToComment(AddCommentToCommentRequest) returns (AddCommentToCommentResponse);
    rpc EditComment(EditCommentRequest) returns (EditCommentResponse);
    rpc GetUsersPostsByDate() returns (stream GetAllPostsByUserIdResponse);
}

message CreatePostRequest {
    string userid = 1;
    string title = 2;
    string content = 3;
    string privacyType = 4;
}

message CreatePostResponse {
    string message = 1;
}

message GetPostByIdRequest {
    string postid = 1;
}

message GetPostByIdResponse {
    string userid = 1;
    string title = 2;
    string content = 3;
    string date = 4;
    repeated Comment comments = 5;
    string message = 6;
}

message Comment {
    string commentid = 1;
    string userid = 2;
    string comment = 3;
    string date = 4;
    repeated Comment comments = 5;
}

message GetAllPostsByUserIdRequest {
    string userid = 1;
}

message GetAllPostsByUserIdResponse {
    string userid = 1;
    string title = 2;
    string content = 3;
    string date = 4;
    repeated Comment comments = 5;
    string message = 6;
}

message EditPostRequest {
    string postid = 1;
    string title = 2;
    string content = 3;
    string privacyType = 4;
}

message EditPostResponse {
    string message = 1;
}

message DeletePostRequest {
	string postid = 1;
}

message DeletePostResponse {
	string message = 1;
}

message LikePostRequest {
    string postid = 1;
    string userid = 2;
}

message LikePostResponse {
    string message = 1;
}

message AddCommentRequest {
    string postid = 1;
    string userid = 2;
    string comment = 3;
}

message AddCommentResponse {
    string message = 1;
}

message DeleteCommentRequest {
    string commentid = 1;
}

message DeleteCommentResponse {
    string message = 1;
}

message LikeCommentRequest {
    string commentid = 1;
    string userid = 2;
}

message LikeCommentResponse {
    string message = 1;
}

message AddCommentToCommentRequest {
    string parentcommentid = 1;
    string userid = 2;
    string comment = 3;
}

message AddCommentToCommentResponse {
    string message = 1;
}

message EditCommentRequest {
    string commentid = 1;
    string comment = 2;
}

message EditCommentResponse {
	string message = 1;
}